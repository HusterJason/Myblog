<!DOCTYPE html>
{% load static %}
{% load category %}
<html lang="en">
<head>

	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>{% block title %}陈虹秀宝贝博客(JasonChenBabyBlog){% endblock %}</title>
	<!-- Bulma CSS -->
	<link rel="stylesheet" href="{% static 'users/css/bulma.min.css' %}">
	<!-- Element UI CSS -->
	<link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
	<!-- 自定义样式 -->
    <link rel="stylesheet" href="{% static 'users/css/style.css' %}">
	 <style>
        html,body {
            margin: 0;
            padding: 0;
            height: 100%;
            background-image: url("{% static 'users/images/background.png' %}"); /* 背景图片路径 */
            background-size: cover; /* 确保图片覆盖整个页面 */
            background-repeat: no-repeat; /* 防止背景图片重复 */
            background-position: center center; /* 图片居中显示 */
            background-attachment: fixed; /* 固定背景图片 */
        }

        .has-background-info-light, .section, .footer {
            background-color: rgba(255, 255, 255, 0.15); /* 透明度15% */
        }
        .navbar {
            background-color: rgba(255, 255, 255, 0.5); /* 设置导航栏半透明背景 */
            width: 100%;
            position: relative;
            z-index: 999; /* 确保导航栏位于最上层 */
        }

        /* 设置导航栏链接样式 */
        .navbar-item {
            color: #333333; /* 导航栏链接文字颜色 */
        }

        h3{
        ;
            font-weight: 900;
            font-size: 20px;
            color: #f9f9f9;
            text-align: center;
        }

    </style>


</head>
<body>
	<nav class="navbar" role="navigation" aria-label="main navigation">
        <div class="container">
            <div class="navbar-brand">
				<a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false"
					data-target="navbarBasicExample">
					<span aria-hidden="true"></span>
					<span aria-hidden="true"></span>
					<span aria-hidden="true"></span>
				</a>
            </div>

            <div id="navbarBasicExample" class="navbar-menu">
				<div class="navbar-start">
					{% block navbar-start %}
					<a class="navbar-item" href="/">
						首页
					</a>

					{% get_category_list as category_list %}
                    {% for category in category_list %}
                    <a class="navbar-item" href="{% url 'blog:category_list' category.id %}">
                        {{ category.name }}
                    </a>
                    {% endfor %}
                    {% endblock %}
				</div>

				<div class="navbar-end">
					{% block navbar-end %}
					<div class="navbar-item">
						{% if user.is_authenticated %}
						<div class="buttons">
							<a class="button is-primary" href="{% url 'users:user_profile' %}" target="_blank">
								<strong> {{ request.user.username }}</strong>
							</a>
							<a href="{% url 'users:logout' %}" class="button is-primary">退出</a>
						</div>
						{% else %}
						<div class="buttons">
							<a class="button is-primary" href="{% url 'users:register' %}" target="_blank">
								<strong>注册</strong>
							</a>
							<a class="button is-light" href="{% url 'users:login' %}" target="_blank">
								登录
							</a>
						</div>
						{% endif %}
					</div>
					{% endblock %}
				</div>
            </div>
        </div>
    </nav>

	<section class="section">
		<div class="container">
			<div class="columns">
				<div class="column is-8">
					{% block section %}
					{% block archives %}{% endblock %}
					{% if page_obj %}
					{% for post in page_obj %}
					<div class="box" style="background-color: #ffffffa8;">
						<h1 class="is-size-5 has-text-weight-bold">
							<a href="{% url 'blog:post_detail' post.id %}"> {{ post.title }}</a>
						</h1>
						<div class="is-size-7 has-text-grey-light pt-1 pb-1">
							<span class="mr-3">作者：{{ post.owner }}</span> <span>发布日期：{{ post.add_date }}</span>
						</div>
						<p class="mt-3">{{ post.desc|truncatechars:50 }}</p>
					</div>
					{% endfor %}
					{% else %}
					<div class="box" style="background-color: #ffffffa8;">
						<p class="has-text-danger">文章不存在！</p>
					</div>
					{% endif %}
					{% if page_obj %}
					<nav class="pagination is-centered" role="navigation" aria-label="pagination">
						{% if page_obj.has_previous %}
						<a class="pagination-previous" href="?page={{ page_obj.previous_page_number }}" style="background-color: #ffffffa8;">Previous</a>
						{% endif %}
						{% if page_obj.has_next %}
						<a class="pagination-next" href="?page={{ page_obj.next_page_number }}" style="background-color: #ffffffa8;">Next page</a>
						{% endif %}

						<ul class="pagination-list">
                             <span>第 {{ page_obj.number }} 页，共 {{ page_obj.paginator.num_pages }} 页</span>
							{% if page_obj.has_previous %}
							<li><a class="pagination-link" href="?page={{ page_obj.previous_page_number }}" style="background-color: #ffffffa8;">{{ page_obj.previous_page_number }}</a></li>
							{% endif %}
							<li><a class="pagination-link is-current" href="?page={{ page_obj.number }}">{{ page_obj.number }}</a></li>
							{% if page_obj.has_next %}
							<li><a class="pagination-link" href="?page={{ page_obj.next_page_number }}" style="background-color: #ffffffa8;">{{ page_obj.next_page_number }}</a></li>
							{% endif %}
                            <div class="pagination">
                                <form method="get" id="per-page-form" class="form-inline">
                                    <label for="per_page">每页显示：</label>
                                    <select name="per_page" id="per_page" class="form-control ml-2" onchange="document.getElementById('per-page-form').submit();">
                                        <option value="2" {% if per_page == 2 %}selected{% endif %}>2</option>
                                        <option value="5" {% if per_page == 5 %}selected{% endif %}>5</option>
                                        <option value="10" {% if per_page == 10 %}selected{% endif %}>10</option>
                                        <option value="20" {% if per_page == 20 %}selected{% endif %}>20</option>
                                        <option value="30" {% if per_page == 30 %}selected{% endif %}>30</option>
                                        <option value="40" {% if per_page == 40 %}selected{% endif %}>40</option>
                                        <option value="50" {% if per_page == 50 %}selected{% endif %}>50</option>

                                    </select>
                                </form>

                            </div>
                        </ul>
                    </nav>
                    {% endif %}
                        <!-- 分页控件和每页显示条数的选择 -->
                    {% endblock %}
                </div>

<!--               {% if messages %}-->
<!--                   <script>-->
<!--                       document.addEventListener("DOMContentLoaded", function() {-->
<!--                           let messageText = "";-->
<!--                           {% for message in messages %}-->
<!--                               messageText += "{{ message }}\n";-->
<!--                           {% endfor %}-->
<!--                           if (messageText) {-->
<!--                               alert(messageText);-->
<!--                           }-->
<!--                       });-->
<!--                   </script>-->
<!--               {% endif %}-->


                <!-- 发表评论成功弹窗-->
                <!-- 引入 SweetAlert 库 -->
                <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
                {% if messages %}
                    <script>
                        document.addEventListener("DOMContentLoaded", function() {
                            let messageText = "";
                            {% for message in messages %}
                                messageText += "{{ message }}\n";
                            {% endfor %}
                            if (messageText) {
                                Swal.fire({
                                    icon: 'success',
                                    title: '成功',
                                    text: messageText
                                });
                            }
                        });
                    </script>
                {% endif %}

				<div class="column is-4">
					{% block right %}
					{% get_sidebar_list as sidebar_list %}
					{% for sidebar in sidebar_list %}
					<div class="box" style="background-color: #ffffffa8;">
						<h1 class="is-size-5 title">{{ sidebar.title }}</h1>
						<p>{{ sidebar.get_content|safe }}</p>
					</div>
					{% endfor %}
					{% endblock %}
				</div>
			</div>
		</div>
	</section>

    <footer class="el-footer" id="foot" style="height: 200px; background-color: #00e7eb66;">
    <div class="ai-foot el-row">
        <div class="el-row" style="font-size: 1.2rem; font-weight: 500; margin-bottom: 20px;">
            <h3>友情链接</h3>
            <div style="display: flex; flex-flow: column wrap; height: 160px; text-align: center;">
                <ul>
                    {% for link in link_list %}
                        <li style="margin: 5px 0;">
                            <a href="{{ link.url }}" target="_blank" style="font-size: 20px; color: antiquewhite;">{{ link.title }}</a>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
</footer>



	<!-- 引入jQuery -->
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<!-- 引入snowfall.js -->
	<script src="{% static 'users/js/snowfall.min.js' %}"></script>
	<script src="{% static 'users/js/snowfall.jquery.min.js' %}"></script>
	<!-- 初始化飘雪效果 -->
	<script>
	    $(document).ready(function() {
	        $(document).snowfall({
	            flakeCount: 250, //雪花数量
	            maxSpeed: 8,  //雪花下落最大速度
	            maxSize: 5    //雪花最大尺寸
	        });
	    });
	</script>

	<!-- 引入Vue -->
	<script src="https://unpkg.com/vue@2/dist/vue.js"></script>
	<!-- 引入Element UI -->
	<script src="https://unpkg.com/element-ui/lib/index.js"></script>
	<script>
	  new Vue({
	    el: '#app',
	    data: function() {
	      return { visible: false }
	    }
	  })
	</script>
<!--<script src="{% static 'js/scripts.js' %}"></script>错的-->
</body>
</html>
